define(function(i){var s=i("mustache"),e=$(window),t={sideSlipTpl:['<div id="J_MedicalPreview" class="medical-preview">','<div id="wrapper">','<div id="scroller">','<ul id="thelist">',"{{#urlInfoArr}}",'<li data-index="{{dataIndex}}"><a href="{{url}}"><div>{{title}}</div></a></li>',"{{/urlInfoArr}}","</ul>","</div>","</div>","</div>"]},l=function(i){this.settings=$.extend({},l.defaults,i),this.init()};l.prototype={init:function(){this.create()},create:function(){var i=this,e=s.render(t.sideSlipTpl.join(""),this.settings.content),l='<div class="rDialog-wrap"><div class="rDialog-content">'+e+"</div></div>";i.sideSlip=$("<div>").addClass("rDialog").css("zIndex",this.settings.zIndex+1).html(l),i.sideSlip.prependTo("body"),i.sideSlip.find("li").removeClass("current"),i.sideSlip.find("li").eq(i.settings.currentIndex).addClass("current"),i.settings.lock&&(i.lock=$("<div>").css("zIndex",this.settings.zIndex).addClass("rDialog-mask"),i.lock.appendTo("body"),i.settings.actionBtnParent.css("zIndex",this.settings.zIndex+1)),i.size(),i.position(),i.bindEvent()},size:function(){var i=this,s=i.sideSlip.find(".rDialog-content");s.css({width:i.settings.width,height:i.settings.height}),i.sideSlip.find("#wrapper").css("height",i.settings.height)},position:function(){var i=this;i.sideSlip.css("top",i.settings.actionBtnParent.height()),"left"===i.settings.categorySide?0===parseInt(i.sideSlip.css("left"))?i.sideSlip.css("left",0):i.sideSlip.css("left",-this.settings.width):0===parseInt(i.sideSlip.css("right"))?i.sideSlip.css("right",0):i.sideSlip.css("right",-this.settings.width),i.settings.lock&&("0"===i.lock.css("opacity")?i.lock.css("opacity",0):i.lock.css("opacity",.7))},pullDown:function(){var i,s=function(){i=new iScroll("wrapper",{vScrollbar:!0,hideScrollbar:!1})};document.getElementById("wrapper").addEventListener("touchmove",function(i){i.preventDefault()},!1),s()},bindEvent:function(){var i=this;i.settings.actionBtn.on("click",function(){"left"===i.settings.categorySide?0===parseInt(i.sideSlip.css("left"))?(i.sideSlip.removeClass("slideContent1"),i.sideSlip.addClass("slideContent2"),i.sideSlip.css("left",-i.settings.width),i.settings.lock&&(i.lock.removeClass("slidePreview2"),i.lock.addClass("slidePreview1"),i.lock.css("opacity",0)),setTimeout(function(){i.sideSlip.hide(),i.settings.lock&&i.lock.hide()},800)):(i.sideSlip.show(),i.sideSlip.removeClass("slideContent2"),i.sideSlip.addClass("slideContent1"),i.sideSlip.css("left",0),i.settings.lock&&(i.lock.show(),i.lock.removeClass("slidePreview1"),i.lock.addClass("slidePreview2"),i.lock.css("opacity",.7))):0===parseInt(i.sideSlip.css("right"))?(i.sideSlip.removeClass("slideContent3"),i.sideSlip.addClass("slideContent4"),i.sideSlip.css("right",-i.settings.width),i.settings.lock&&(i.lock.removeClass("slidePreview2"),i.lock.addClass("slidePreview1"),i.lock.css("opacity",0)),setTimeout(function(){i.sideSlip.hide(),i.settings.lock&&i.lock.hide()},800)):(i.sideSlip.show(),i.sideSlip.removeClass("slideContent4"),i.sideSlip.addClass("slideContent3"),i.sideSlip.css("right",0),i.settings.lock&&(i.lock.show(),i.lock.removeClass("slidePreview1"),i.lock.addClass("slidePreview2"),i.lock.css("opacity",.7)))}),i.sideSlip.delegate("li","click",function(){var s=$(this);s.hasClass("current")||(i.sideSlip.find("li").removeClass("current"),s.addClass("current"),i.settings.currentIndex=parseInt(s.attr("data-index")))}),e.on("resize",function(){i.position()}),i.settings.pullDownFlag&&i.pullDown()}},l.defaults={actionBtn:null,actionBtnParent:null,content:{},categorySide:"left",width:0,height:0,lock:!1,pullDownFlag:!1,currentIndex:0,zIndex:9};var n=function(i){new l(i)};window.rSideSlip=$.rSideSlip=$.sideSlip=n});